<!DOCTYPE html>
<html>
  <head>
    <title>AR.js + WebM Alpha</title>
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <link rel="stylesheet" href="style.css" />
    <script src="js/marker-video-controller.js" defer></script>
    <script src="js/ui-controls.js" defer></script>
    <script src="js/subtitle-controller.js" defer></script>
    <script src="js/main.js" defer></script>
  </head>

  <!--UI Buttons -->
  <button id="clean-fullscreen-btn">â›¶</button>
  <button id="change-len-btn">ENG</button>

  <body style="margin: 0; overflow: hidden">
    <!-- AR SCENE -->
    <a-scene
      vr-mode-ui="enabled: false"
      embedded
      renderer="alpha: true; antialias: true;"
      arjs="sourceType: webcam; debugUIEnabled: false;"
    >
      <!-- DRAGO -->
      <a-assets id="drago">
        <video
          id="drago-video-ita"
          src="/drago/drago_ITA.webm"
          loop
          playsinline
          preload="metadata"
          crossorigin="anonymous"
        >
          <track label="italiano" kind="subtitles" srclang="ita" src="/subtitles/drago_ITA.vtt" default />
        </video>
        <video
          id="drago-video-eng"
          src="/drago/drago_ENG.webm"
          loop
          playsinline
          preload="metadata"
          crossorigin="anonymous"
        ></video>
      </a-assets>
      <a-marker
        type="pattern"
        url="./drago/pattern-drago.patt"
        smoothCount="0"
        smoothTolerance="0.0001"
      >
        <a-plane
          src="#drago-video-ita"
          width="10"
          height="10"
          position="0 0.01 0"
          rotation="-90 0 0"
          material="transparent: true; side: double; alphaTest: 0.001;"
        ></a-plane>
      </a-marker>

      <!-- BODHISATTVA -->
      <a-assets id="bod">
        <video
          id="bod-video-ita"
          src="./bod/bod_ITA.webm"
          loop
          playsinline
          preload="none"
          crossorigin="anonymous"
        ></video>
        <video
          id="bod-video-eng"
          src="./bod/bod_ENG.webm"
          loop
          playsinline
          preload="none"
          crossorigin="anonymous"
        ></video>
      </a-assets>
      <a-marker
        type="pattern"
        url="./bod/pattern-bod.patt"
        smoothCount="0"
        smoothTolerance="0.0001"
      >
        <a-plane
          src="#bod-video-ita"
          width="10"
          height="10"
          position="0 0.01 0"
          rotation="-90 0 0"
          material="transparent: true; side: double; alphaTest: 0.001;"
        ></a-plane>
      </a-marker>

      <!-- LU -->
      <a-assets id="lu">
        <video
          id="lu-video-ita"
          src="./lu/lu_ITA.webm"
          loop
          playsinline
          preload="none"
          crossorigin="anonymous"
        ></video>
        <video
          id="lu-video-eng"
          src="./lu/lu_ENG.webm"
          loop
          playsinline
          preload="none"
          crossorigin="anonymous"
        ></video>
      </a-assets>
      <a-marker
        type="pattern"
        url="./lu/pattern-lu.patt"
        smoothCount="0"
        smoothTolerance="0.0001"
      >
        <a-plane
          src="#lu-video-ita"
          width="10"
          height="10"
          position="0 0.01 0"
          rotation="-90 0 0"
          material="transparent: true; side: double; alphaTest: 0.001;"
        ></a-plane>
      </a-marker>

      <!-- TIGRE -->
      <a-assets id="tigre">
        <video
          id="tigre-video-ita"
          src="./tiger/tigre_ITA.webm"
          loop
          playsinline
          preload="none"
          crossorigin="anonymous"
        ></video>
        <video
          id="tigre-video-eng"
          src="./tiger/tigre_ENG.webm"
          loop
          playsinline
          preload="none"
          crossorigin="anonymous"
        ></video>
      </a-assets>
      <a-marker
        type="pattern"
        url="./tiger/pattern-tigre.patt"
        smoothCount="0"
        smoothTolerance="0.0001"
      >
        <a-plane
          src="#tigre-video-ita"
          width="10"
          height="10"
          position="0 0.01 0"
          rotation="-90 0 0"
          material="transparent: true; side: double; alphaTest: 0.001;"
        ></a-plane>
      </a-marker>

      <!-- ZHO -->
      <a-assets id="zho">
        <video
          id="zho-video-ita"
          src="./zho/zho_ITA.webm"
          loop
          playsinline
          preload="none"
          crossorigin="anonymous"
        ></video>
        <video
          id="zho-video-eng"
          src="./zho/zho_ENG.webm"
          loop
          playsinline
          preload="none"
          crossorigin="anonymous"
        ></video>
      </a-assets>
      <a-marker
        type="pattern"
        url="./zho/pattern-zho.patt"
        smoothCount="0"
        smoothTolerance="0.0001"
      >
        <a-plane
          src="#zho-video-ita"
          width="10"
          height="10"
          position="0 0.01 0"
          rotation="-90 0 0"
          material="transparent: true; side: double; alphaTest: 0.001;"
        ></a-plane>
      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>

    <div id="controls">
      <button id="open_tutorial" class="wrapper">
        <span>Tutorial</span>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
          <!-- Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc. -->
           <path d="M320 576C461.4 576 576 461.4 576 320C576 178.6 461.4 64 320 64C178.6 64 64 178.6 64 320C64 461.4 178.6 576 320 576zM288 224C288 206.3 302.3 192 320 192C337.7 192 352 206.3 352 224C352 241.7 337.7 256 320 256C302.3 256 288 241.7 288 224zM280 288L328 288C341.3 288 352 298.7 352 312L352 400L360 400C373.3 400 384 410.7 384 424C384 437.3 373.3 448 360 448L280 448C266.7 448 256 437.3 256 424C256 410.7 266.7 400 280 400L304 400L304 336L280 336C266.7 336 256 325.3 256 312C256 298.7 266.7 288 280 288z"/></svg>
      </button>

      <button id="subtitles" data-state="subtitles">
        <span>CC</span>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
          <!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc. -->
          <path d="M64 192C64 156.7 92.7 128 128 128L512 128C547.3 128 576 156.7 576 192L576 448C576 483.3 547.3 512 512 512L128 512C92.7 512 64 483.3 64 448L64 192zM216 272L248 272C252.4 272 256 275.6 256 280C256 293.3 266.7 304 280 304C293.3 304 304 293.3 304 280C304 249.1 278.9 224 248 224L216 224C185.1 224 160 249.1 160 280L160 360C160 390.9 185.1 416 216 416L248 416C278.9 416 304 390.9 304 360C304 346.7 293.3 336 280 336C266.7 336 256 346.7 256 360C256 364.4 252.4 368 248 368L216 368C211.6 368 208 364.4 208 360L208 280C208 275.6 211.6 272 216 272zM384 280C384 275.6 387.6 272 392 272L424 272C428.4 272 432 275.6 432 280C432 293.3 442.7 304 456 304C469.3 304 480 293.3 480 280C480 249.1 454.9 224 424 224L392 224C361.1 224 336 249.1 336 280L336 360C336 390.9 361.1 416 392 416L424 416C454.9 416 480 390.9 480 360C480 346.7 469.3 336 456 336C442.7 336 432 346.7 432 360C432 364.4 428.4 368 424 368L392 368C387.6 368 384 364.4 384 360L384 280z"/></svg>
      </button>

      <div id="subtitle-overlay" class="subtitle-container hidden-ui"></div>

      <div class="backdrop" id="backdrop">
        <div class="dialog">
          <h2>Tutorial</h2>
          <ul>
            <li>Alzare il volume del telefono e acconsentire all'accesso della webcam</li>
            <li>Inquadrare gli ideogrammi presenti nelle vetrine e rimanere fermi</li>
            <li>Puoi cambiare la lingua tramite il pulsante in alto a destra e aggiungere i sottotitoli con il pulsante 
              blu in basso a sinistra
            </li>
          </ul>
          <button id="close" style="margin-top: 14px">Close</button>
        </div>
      </div>
    </div>
  </body>
</html>